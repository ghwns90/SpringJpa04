<div class="card m-2" id="comments=new">
	<div class="card-body">
		<!-- 댓글 작성 폼 -->
		<form>
			<input type="hidden" value="{{id}}"/>
			<div class="mb-3">
				<label class="form-label" for="new-comments-nickname">닉네임</label>
				<div>
					<input type="text" class="form-control" id="new-comments-nickname" />
				</div>
			</div>
			<div class="mb-3">
				<label class="form-label" for="new-comments-body">댓글 본문</label>
				<div>
					<textarea class="form-control" id="new-comments-body" ></textarea>
				</div>
			</div>
			
			<button type="button" class="btn btn-primary" id="new-create-btn">작성</button>
		</form>
	</div>
</div>

<script>
	const newCreateBtnEl = document.querySelector('#new-create-btn');
	const nicknameEl = document.querySelector('#new-comments-nickname');
	const bodyEl     = document.querySelector('#new-comments-body');
	
	newCreateBtnEl.addEventListener('click', () => {
		if(nicknameEl.value.trim()=='' || bodyEl.value.trim()==''){
			alert('닉네임이나 댓글 내용이 없습니다');
			return false;
		}
		let url = '/api/articles/{{id}}/comments';
		
		const comment = {
				nickname   : nicknameEl.value,
				body       : bodyEl.value,
				article_id : {{id}}
		}
		const params = {
				method  : 'POST',
				body    : JSON.stringify(comment),
				headers : {"Content-type" : "application/json;charset=utf-8"}
		}
		
		fetch(url, params)
			.then((response) => {
				let cid = response.id;
				const msg = (response.ok) 
					? '댓글이 등록되었습니다' : '댓글 등록 실패';
				alert(msg);
				location.reload();
			}) // fetch end
	}) // 새 글 쓰기 버튼 종료
	
	// 삭제
</script>